{% macro video_card(image) %}
<div class="grid-item card-hover" data-id="{{ image.id }}">
    <div class="image-wrapper">
        <img src="{{ image.image_url }}" alt="{{ image.prompt|truncate(50) }}" loading="lazy"
            onclick="window.location.href='/image/{{ image.id }}'">

        <!-- Bottom Hover Overlay -->
        <div class="overlay-hover-bottom" onclick="window.location.href='/image/{{ image.id }}'">
            <button class="btn-search-similar" onclick="event.stopPropagation(); searchSimilar('{{ image.id }}')">
                Search similar items
            </button>
        </div>

        <!-- Card Info (mood chip, colors) -->
        <div class="card-info-overlay">
            {% if image.mood %}
            <span class="chip active">{{ image.mood }}</span>
            {% endif %}
            <div class="color-palette-mini">
                {% for color in image.colors[:4] %}
                <span class="color-dot" style="background-color: {{ color }};"></span>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Multi-select Checkbox (top-left) - Moved out of overflow -->
    <div class="card-select" onclick="event.stopPropagation(); toggleSelect('{{ image.id }}', this)">
        <i class="bi bi-square"></i>
    </div>

    <!-- GIF Badge (if applicable) -->
    {% if image.gif_url %}
    <span class="card-badge">GIF</span>
    {% endif %}

    <!-- Top-right Action Buttons - Moved out of overflow -->
    <div class="card-top-actions">
        <button class="btn-card" onclick="event.stopPropagation(); searchSimilar('{{ image.id }}')"
            title="Search similar">
            <i class="bi bi-search"></i>
        </button>
        <div class="save-dropdown-wrapper">
            <button class="btn-card btn-save" onclick="event.stopPropagation(); toggleSaveDropdown(this)"
                title="Save to board">
                <i class="bi bi-grid-3x3-gap"></i> Save <i class="bi bi-chevron-down"
                    style="font-size: 10px; margin-left: 4px;"></i>
            </button>
            <!-- Save to Board Dropdown -->
            <div class="save-dropdown hidden">
                <div class="dropdown-header">Save to board</div>
                <input type="text" class="dropdown-search" placeholder="Search for board" oninput="filterBoards(this)">
                <div class="dropdown-label">Recent boards</div>
                <div class="board-list" data-image-id="{{ image.id }}">
                    <!-- Populated by JS -->
                </div>
                <div class="dropdown-footer" onclick="event.stopPropagation(); openNewBoardModal('{{ image.id }}')">
                    <span>Create new board</span>
                    <span class="shortcut">⌘↵</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endmacro %}