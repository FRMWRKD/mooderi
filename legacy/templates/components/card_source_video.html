{% macro source_video_card(video) %}
<div class="grid-item card-hover" onclick="window.location.href='/video/{{ video.id }}'">
    <div class="image-wrapper">
        <!-- Thumbnail or placeholder -->
        <img src="{{ video.thumbnail_url or 'https://via.placeholder.com/640x360?text=No+Thumbnail' }}"
            alt="{{ video.title }}" loading="lazy">

        <!-- Video Duration Badge -->
        <div class="duration-badge"
            style="position: absolute; bottom: 10px; right: 10px; background: rgba(0,0,0,0.8); padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 500;">
            {% if video.duration %}
            {{ (video.duration / 60)|int }}:{{ '%02d' % (video.duration % 60) }}
            {% else %}
            --:--
            {% endif %}
        </div>

        <!-- Status Badge -->
        {% if video.status != 'completed' %}
        <div class="status-badge"
            style="position: absolute; top: 10px; right: 10px; background: var(--accent-purple); padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 600;">
            {{ video.status|upper }}
        </div>
        {% endif %}

        <!-- Hover Overlay -->
        <div class="overlay-hover">
            <div class="card-actions">
                <button class="btn-icon-soft" title="Play">
                    <i class="bi bi-play-fill"></i>
                </button>
                <div class="spacer"></div>
                <button class="btn-icon-soft" title="Delete"
                    onclick="event.stopPropagation(); deleteVideo('{{ video.id }}')">
                    <i class="bi bi-trash"></i>
                </button>
            </div>

            <div class="card-info" style="pointer-events: none;">
                <h4 style="font-size: 14px; margin-bottom: 4px; text-shadow: 0 2px 4px rgba(0,0,0,0.8);">{{ video.title
                    or 'Untitled Video' }}</h4>
                <div style="font-size: 11px; opacity: 0.8;">{{ video.frame_count }} frames extracted</div>
            </div>
        </div>
    </div>
</div>
{% endmacro %}