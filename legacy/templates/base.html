<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeCheck // Visual Intelligence</title>

    <!-- Fonts: Inter & Outfit -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@500;600;700&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}?v=6">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="brand">
                <div class="brand-icon">M</div>
                <span class="brand-text">Mooderi</span>
                <button class="btn-icon-soft sidebar-toggle" onclick="toggleSidebar()">
                    <i class="bi bi-layout-sidebar"></i>
                </button>
            </div>

            <div class="nav-menu">
                <div class="menu-label"
                    style="padding: 0 12px; margin-bottom: 4px; font-size: 11px; color: var(--text-tertiary); text-transform: uppercase; letter-spacing: 0.05em;">
                    Library</div>
                <a href="/" class="nav-item active">
                    <i class="bi bi-grid"></i>
                    <span>Discover</span>
                </a>
                <a href="/videos" class="nav-item">
                    <i class="bi bi-collection-play"></i>
                    <span>My Videos</span>
                </a>
                <a href="/my-images" class="nav-item">
                    <i class="bi bi-images"></i>
                    <span>My Images</span>
                </a>

                <div class="menu-label"
                    style="padding: 0 12px; margin: 24px 0 4px; font-size: 11px; color: var(--text-tertiary); text-transform: uppercase; letter-spacing: 0.05em;">
                    Folders</div>

                <!-- Folder Item with Sub-folders (Expanded) -->
                <div>
                    <a href="/folder/inspiration" class="nav-item active" style="justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <i class="bi bi-folder-open"></i>
                            <span>Inspiration</span>
                        </div>
                        <i class="bi bi-chevron-down" style="font-size: 12px; opacity: 0.5;"></i>
                    </a>
                    <!-- Sub-folders -->
                    <div class="sub-menu" style="padding-left: 24px; position: relative;">
                        <!-- Vertical line for hierarchy visual -->
                        <div
                            style="position: absolute; left: 23px; top: 0; bottom: 10px; width: 1px; background: var(--border-subtle); opacity: 0.5;">
                        </div>

                        <a href="/folder/scifi" class="nav-item" style="font-size: 13px; height: 32px;">
                            <span
                                style="width: 6px; height: 6px; border-radius: 50%; background: var(--border-subtle); margin-right: 10px; position: relative; z-index: 2;"></span>
                            <span>Sci-Fi Concepts</span>
                        </a>
                        <a href="/folder/cyberpunk" class="nav-item" style="font-size: 13px; height: 32px;">
                            <span
                                style="width: 6px; height: 6px; border-radius: 50%; background: var(--accent-purple); box-shadow: 0 0 8px var(--accent-purple); margin-right: 10px; position: relative; z-index: 2;"></span>
                            <span>Cyberpunk v2</span>
                        </a>
                    </div>
                </div>

                <!-- Regular Folder -->
                <a href="/folder/arch" class="nav-item">
                    <i class="bi bi-folder"></i>
                    <span>Architecture</span>
                </a>
                <a href="#" class="nav-item" style="color: var(--text-tertiary);"
                    onclick="openNewFolderModal(); return false;">
                    <i class="bi bi-plus-lg"></i>
                    <span>New Folder</span>
                </a>
            </div>

            <div class="user-profile" id="user-profile-trigger">
                <div class="avatar">T</div>
                <div class="user-info" style="display: flex; flex-direction: column; gap: 2px;">
                    <span style="font-size: 13px; font-weight: 500;">Theo's Workspace</span>
                    <span style="font-size: 11px; color: var(--text-tertiary);">Pro Plan</span>
                </div>
            </div>
        </nav>

        <!-- User Dropdown (Absolute Positioned) -->
        <div class="user-dropdown" id="user-dropdown">
            <a href="#" id="nav-profile"><i class="bi bi-person"></i> Profile</a>
            <a href="#" id="nav-settings"><i class="bi bi-gear"></i> Settings</a>
            <a href="#" id="nav-buy-credits"><i class="bi bi-credit-card"></i> Buy Credits</a>
            <div class="divider"></div>
            <a href="#" class="text-danger" id="nav-logout"><i class="bi bi-box-arrow-right"></i> Logout</a>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <form action="/search" method="GET" class="search-bar">
                    <i class="bi bi-search"></i>
                    <input type="text" name="q" placeholder="Search mood, color, style, or vibe..."
                        value="{{ request.args.get('q', '') }}">
                    <button type="button" id="semantic-toggle" class="semantic-toggle"
                        title="Text search (exact match)">
                        <i class="bi bi-lightbulb"></i>
                    </button>
                </form>

                <div class="actions">
                    <div class="credits-badge">
                        <i class="bi bi-coin"></i>
                        <span><span id="credits-topbar">100</span> Credits</span>
                    </div>

                    <div class="notification-wrapper" style="position: relative;">
                        <span class="notification-badge" id="notification-trigger"><i class="bi bi-bell"></i></span>

                        <!-- Notifications Dropdown -->
                        <div class="notifications-dropdown" id="notifications-dropdown">
                            <div class="notifications-header">
                                <h4>Notifications</h4>
                                <a href="#">Mark all read</a>
                            </div>
                            <div class="notification-item">
                                <div class="icon"><i class="bi bi-clipboard-check"></i></div>
                                <div class="content">
                                    <p>Prompt copied to clipboard</p>
                                    <span>2 minutes ago</span>
                                </div>
                            </div>
                            <div class="notification-item">
                                <div class="icon"><i class="bi bi-folder-plus"></i></div>
                                <div class="content">
                                    <p>Board "Cinematic" created</p>
                                    <span>1 hour ago</span>
                                </div>
                            </div>
                            <div class="notification-item">
                                <div class="icon"><i class="bi bi-film"></i></div>
                                <div class="content">
                                    <p>Video analysis completed - 39 frames</p>
                                    <span>Yesterday</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button class="btn-accent" id="btn-new-video">
                        <i class="bi bi-plus-lg"></i> New Video
                    </button>
                </div>
            </div>

            <!-- Content Area -->
            <div class="scroll-area">
                {% with messages = get_flashed_messages() %}
                {% if messages %}
                <div class="flash-messages">
                    {% for message in messages %}
                    <div class="alert">{{ message }}</div>
                    {% endfor %}
                </div>
                {% endif %}
                {% endwith %}

                {% block content %}{% endblock %}
            </div>
        </main>
    </div>

    <!-- MODALS -->

    <!-- New Board Modal -->
    <div id="modal-new-board" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3>Create New Board</h3>
                <button class="btn-close"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Board Name</label>
                    <input type="text" id="new-board-name" class="input-glass" placeholder="e.g. Sci-Fi Noir Reference">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary btn-close-modal">Cancel</button>
                <button class="btn-primary" id="submit-new-board">Create Board</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="modal-settings" class="modal-overlay hidden">
        <div class="modal large">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="btn-close"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>Account</h4>
                    <div class="form-group">
                        <label>Display Name</label>
                        <input type="text" value="Director" id="settings-name">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" value="director@studio.com" disabled>
                    </div>
                </div>
                <div class="settings-section">
                    <a href="/videos" class="nav-item">
                        <i class="bi bi-collection-play"></i>
                        <span>My Videos</span>
                    </a>
                    <div class="toggle-row">
                        <span>Dark Mode</span>
                        <div class="toggle-switch active" data-setting="dark-mode"></div>
                    </div>
                    <div class="toggle-row">
                        <span>Auto-play Videos</span>
                        <div class="toggle-switch" data-setting="autoplay"></div>
                    </div>
                    <div class="toggle-row">
                        <span>Sound Effects</span>
                        <div class="toggle-switch active" data-setting="sounds"></div>
                    </div>
                    <div class="toggle-row">
                        <span>Email Notifications</span>
                        <div class="toggle-switch" data-setting="emails"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary btn-close-modal">Cancel</button>
                <button class="btn-primary" id="save-settings">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="modal-profile" class="modal-overlay hidden">
        <div class="modal large">
            <div class="modal-header">
                <h3>Profile</h3>
                <button class="btn-close"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <button class="tab active" data-tab="profile-info">Profile</button>
                    <button class="tab" data-tab="profile-subscription">Subscription</button>
                    <button class="tab" data-tab="profile-history">History</button>
                </div>

                <!-- Profile Tab -->
                <div class="tab-content active" id="profile-info">
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 24px;">
                        <div class="avatar" style="width: 80px; height: 80px; font-size: 28px;">D</div>
                        <div>
                            <h4 style="margin: 0 0 4px 0; color: var(--text-primary); font-size: 18px;">Director</h4>
                            <p style="color: var(--text-secondary); font-size: 13px;">director@studio.com</p>
                            <p style="color: var(--accent); font-size: 13px; margin-top: 4px;">Pro Plan</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Display Name</label>
                        <input type="text" value="Director">
                    </div>
                    <div class="form-group">
                        <label>Bio</label>
                        <input type="text" placeholder="Tell us about yourself...">
                    </div>
                </div>

                <!-- Subscription Tab -->
                <div class="tab-content" id="profile-subscription">
                    <div
                        style="background: var(--gradient-subtle); border: 1px solid rgba(139,92,246,0.2); border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h4 style="margin: 0 0 4px 0; color: var(--text-primary);">Pro Plan</h4>
                                <p style="color: var(--text-secondary); font-size: 13px;">500 credits/month â€¢ Unlimited
                                    boards</p>
                            </div>
                            <span
                                style="background: var(--gradient-primary); padding: 6px 14px; border-radius: 8px; font-size: 12px; font-weight: 600;">ACTIVE</span>
                        </div>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 16px;">Credits remaining:
                        <strong style="color: var(--text-primary);">100</strong>
                    </p>
                    <p style="color: var(--text-secondary); font-size: 13px;">Next billing: <strong
                            style="color: var(--text-primary);">January 1, 2025</strong></p>
                </div>

                <!-- History Tab -->
                <div class="tab-content" id="profile-history">
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #0a0a0a; border-radius: 10px;">
                            <div>
                                <p style="font-size: 13px; margin-bottom: 2px;">Copied prompt: "Cinematic neon city..."
                                </p>
                                <span style="font-size: 11px; color: var(--text-secondary);">2 minutes ago</span>
                            </div>
                            <span style="color: var(--danger); font-size: 13px;">-1</span>
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #0a0a0a; border-radius: 10px;">
                            <div>
                                <p style="font-size: 13px; margin-bottom: 2px;">Video analysis: Nike commercial</p>
                                <span style="font-size: 11px; color: var(--text-secondary);">1 hour ago</span>
                            </div>
                            <span style="color: var(--danger); font-size: 13px;">-10</span>
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #0a0a0a; border-radius: 10px;">
                            <div>
                                <p style="font-size: 13px; margin-bottom: 2px;">Credits purchased</p>
                                <span style="font-size: 11px; color: var(--text-secondary);">Yesterday</span>
                            </div>
                            <span style="color: var(--success); font-size: 13px;">+100</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary btn-close-modal">Done</button>
            </div>
        </div>
    </div>

    <!-- Buy Credits Modal -->
    <div id="modal-credits" class="modal-overlay hidden">
        <div class="modal large">
            <div class="modal-header">
                <h3>Buy Credits</h3>
                <button class="btn-close"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text-secondary); margin-bottom: 8px;">Current balance: <strong
                        style="color: var(--text-primary);"><span id="credits-modal">100</span> credits</strong></p>
                <div class="pricing-grid">
                    <div class="pricing-card" data-credits="50">
                        <div class="credits">50</div>
                        <div class="label">credits</div>
                        <div class="price">$4.99</div>
                    </div>
                    <div class="pricing-card popular" data-credits="200">
                        <div class="credits">200</div>
                        <div class="label">credits</div>
                        <div class="price">$14.99</div>
                    </div>
                    <div class="pricing-card" data-credits="500">
                        <div class="credits">500</div>
                        <div class="label">credits</div>
                        <div class="price">$29.99</div>
                    </div>
                </div>
                <p style="color: var(--text-secondary); font-size: 12px; margin-top: 20px; text-align: center;">
                    <i class="bi bi-shield-check"></i> Secure payment powered by Stripe
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary btn-close-modal">Cancel</button>
                <button class="btn-primary" id="buy-credits-btn">Purchase</button>
            </div>
        </div>
    </div>

    <!-- New Video Modal (with Quality Presets & Frame Approval) -->
    <div id="modal-new-video" class="modal-overlay hidden">
        <div class="modal large">
            <div class="modal-header">
                <h3>Analyze Video</h3>
                <button class="btn-close"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="modal-body">
                <!-- Step 1: Input Section -->
                <div id="video-input-section">
                    <div class="form-group">
                        <label>YouTube or Vimeo URL</label>
                        <input type="text" id="video-url-input" placeholder="https://youtube.com/watch?v=...">
                    </div>

                    <!-- Quality Mode Selector -->
                    <div class="form-group" style="margin-top: 16px;">
                        <label>Frame Selection Quality</label>
                        <div class="quality-selector">
                            <label class="quality-option">
                                <input type="radio" name="quality-mode" value="strict">
                                <div class="quality-card">
                                    <i class="bi bi-funnel-fill"></i>
                                    <span class="quality-name">Strict</span>
                                    <span class="quality-desc">Fewer frames, highest quality</span>
                                    <span class="quality-badge saves">Saves credits</span>
                                </div>
                            </label>
                            <label class="quality-option">
                                <input type="radio" name="quality-mode" value="medium" checked>
                                <div class="quality-card recommended">
                                    <i class="bi bi-sliders"></i>
                                    <span class="quality-name">Medium</span>
                                    <span class="quality-desc">Balanced selection</span>
                                    <span class="quality-badge recommended">Recommended</span>
                                </div>
                            </label>
                            <label class="quality-option">
                                <input type="radio" name="quality-mode" value="high">
                                <div class="quality-card">
                                    <i class="bi bi-grid-3x3-gap-fill"></i>
                                    <span class="quality-name">High</span>
                                    <span class="quality-desc">More frames, minimal cuts</span>
                                    <span class="quality-badge">Most frames</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <p style="color: var(--text-secondary); font-size: 12px; margin-top: 12px;">
                        <i class="bi bi-info-circle"></i> Credits charged only for frames you approve.
                    </p>
                </div>

                <!-- Step 2: Progress Section -->
                <div id="video-progress-section" style="display: none;">
                    <div style="text-align: center; padding: 20px 0;">
                        <div class="logo-icon" style="width: 48px; height: 48px; font-size: 20px; margin: 0 auto 16px;">
                            V</div>
                        <p style="font-size: 14px; margin-bottom: 8px;" id="progress-message">Downloading video...</p>
                        <div
                            style="background: #0a0a0a; border-radius: 8px; height: 6px; overflow: hidden; margin: 16px 0;">
                            <div id="progress-bar"
                                style="background: var(--gradient-primary); height: 100%; width: 0%; transition: width 0.5s ease;">
                            </div>
                        </div>
                        <span style="color: var(--text-secondary); font-size: 12px;" id="progress-percent">0%</span>
                        <p class="processing-estimate"><i class="bi bi-clock"></i> Takes 2-3 minutes per minute of
                            video. You can minimize this and continue browsing.</p>
                    </div>
                    <div class="modal-actions-row">
                        <button class="btn-minimize" id="minimize-video-btn">
                            <i class="bi bi-dash-lg"></i> Minimize
                        </button>
                        <button class="btn-secondary" id="cancel-video-btn">
                            <i class="bi bi-x-lg"></i> Cancel
                        </button>
                    </div>
                </div>

                <!-- Step 3: Frame Approval Section -->
                <div id="video-approval-section" style="display: none;">
                    <div class="approval-header">
                        <h4><i class="bi bi-check2-square"></i> Review Extracted Frames</h4>
                        <p>Select the frames you want to keep. Only approved frames will be saved and charged.</p>
                    </div>

                    <!-- Selected Frames -->
                    <div class="approval-category">
                        <div class="approval-category-header">
                            <span class="category-label selected"><i class="bi bi-stars"></i> AI Selected (<span
                                    id="selected-count">0</span>)</span>
                            <button class="btn-link" id="select-all-btn">Select All</button>
                        </div>
                        <div id="selected-frames-grid" class="approval-grid">
                            <!-- Frames loaded dynamically -->
                        </div>
                    </div>

                    <!-- Rejected/Hidden Frames (collapsible) -->
                    <details class="rejected-frames-section">
                        <summary><i class="bi bi-eye-slash"></i> Show Hidden Frames (<span id="rejected-count">0</span>)
                        </summary>
                        <p style="color: var(--text-secondary); font-size: 12px; margin: 8px 0;">
                            These frames were filtered out but you can still include them.
                        </p>
                        <div id="rejected-frames-grid" class="approval-grid dimmed">
                            <!-- Rejected frames loaded dynamically -->
                        </div>
                    </details>

                    <div class="approval-summary">
                        <span><i class="bi bi-coin"></i> <span id="approval-credit-cost">0</span> credits will be
                            charged for <span id="approval-frame-count">0</span> frames</span>
                    </div>
                </div>

                <!-- Step 4: Success Section -->
                <div id="video-success-section" style="display: none;">
                    <div style="text-align: center; padding: 20px 0;">
                        <i class="bi bi-check-circle"
                            style="font-size: 48px; color: var(--success); display: block; margin-bottom: 16px;"></i>
                        <h4 style="margin-bottom: 8px; color: var(--text-primary);">Frames Added!</h4>
                        <p style="color: var(--text-secondary); font-size: 13px;" id="success-message">Added 39
                            frames to your library</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer" id="video-modal-footer">
                <button class="btn-secondary btn-close-modal">Cancel</button>
                <button class="btn-primary" id="start-video-analysis">
                    <i class="bi bi-play-fill"></i> Start Analysis
                </button>
                <button class="btn-primary" id="approve-frames-btn" style="display: none;">
                    <i class="bi bi-check-lg"></i> Approve Selected
                </button>
            </div>
        </div>
    </div>

    <!-- Smart Moodboard Modal (Redesigned - Clean UI) -->
    <div id="modal-smart-board" class="modal-overlay hidden">
        <div class="modal large">
            <div class="modal-header">
                <h3><i class="bi bi-stars"></i> Create Smart Moodboard</h3>
                <button class="btn-close"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="modal-body">
                <!-- Step 1: Input Section -->
                <div id="smart-input-section">
                    <div class="form-group">
                        <label>Describe your vision</label>
                        <textarea id="smart-prompt" rows="2"
                            placeholder="e.g. Dark cinematic perfume commercial, Blade Runner vibes..."></textarea>
                    </div>
                    <button class="btn-primary" id="analyze-prompt-btn" style="width: 100%; margin-top: 12px;">
                        <i class="bi bi-magic"></i> Analyze
                    </button>
                </div>

                <!-- Step 2: Analysis Results (Clean Layout) -->
                <div id="smart-analysis-section" style="display: none;">

                    <!-- Main Insight - One clear summary -->
                    <div class="smart-insight" id="smart-insight">
                        <i class="bi bi-lightbulb-fill"></i>
                        <span id="insight-text">Looking for dark, cinematic imagery with mysterious vibes...</span>
                    </div>

                    <!-- Suggestions Checklist -->
                    <div class="suggestions-section">
                        <div class="suggestions-header">
                            <span><i class="bi bi-stars"></i> AI Suggestions</span>
                            <button class="btn-link" id="toggle-all-suggestions">Select All</button>
                        </div>
                        <div id="suggestions-list" class="suggestions-list">
                            <!-- Populated by JS as checkable items -->
                        </div>
                    </div>

                    <!-- Preview Grid with Add/Remove -->
                    <div class="preview-section-clean">
                        <div class="preview-header">
                            <span>Preview</span>
                            <button class="btn-link" id="find-more-btn"><i class="bi bi-plus"></i> Find More</button>
                        </div>
                        <div id="smart-preview" class="preview-grid-editable">
                            <!-- Preview items with X button -->
                        </div>
                    </div>

                    <!-- Collapsible Options -->
                    <details class="more-options" id="more-options">
                        <summary><i class="bi bi-sliders"></i> More Options</summary>
                        <div class="options-content">
                            <div class="option-row">
                                <label>Images: <span id="image-count-label">20</span></label>
                                <input type="range" id="image-count-slider" min="5" max="50" value="20" step="5">
                            </div>
                            <div class="option-row">
                                <label>Strictness: <span id="strictness-label">Medium</span></label>
                                <input type="range" id="strictness-slider" min="30" max="90" value="55" step="5">
                            </div>
                            <div class="option-row filters-collapsed" id="concept-filters">
                                <label>Filters (click to toggle)</label>
                                <div id="filter-chips" class="filter-chips">
                                    <!-- Color, mood, style chips - populated by JS -->
                                </div>
                            </div>
                        </div>
                    </details>

                    <!-- Board Name Input -->
                    <div class="board-name-row">
                        <input type="text" id="smart-board-name" placeholder="Board name...">
                    </div>
                </div>

                <!-- Progress Section -->
                <div id="smart-progress-section" style="display: none;">
                    <div style="text-align: center; padding: 40px 0;">
                        <div class="spinner"></div>
                        <p id="smart-progress-message">Finding matching images...</p>
                    </div>
                </div>

                <!-- Success Section -->
                <div id="smart-success-section" style="display: none;">
                    <div style="text-align: center; padding: 40px 0;">
                        <i class="bi bi-check-circle" style="font-size: 48px; color: var(--success);"></i>
                        <h4 style="margin: 16px 0 8px;">Board Created!</h4>
                        <p id="smart-success-message" style="color: var(--text-secondary);">Added 20 images</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer" id="smart-modal-footer">
                <button class="btn-secondary btn-close-modal">Cancel</button>
                <button class="btn-primary" id="generate-smart-board" style="display: none;">
                    <i class="bi bi-stars"></i> Create Board
                </button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    {% from 'components/modal_base.html' import modal %}

    {% call modal('new-folder-modal', 'Create New Folder') %}
    <div style="padding: 20px;">
        <div class="form-group" style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 8px; color: var(--text-secondary);">Folder Name</label>
            <input type="text" class="input-glass" placeholder="e.g., Inspiration 2024" id="new-folder-name">
        </div>
        <div style="display: flex; justify-content: flex-end; gap: 12px;">
            <button class="btn btn-secondary" onclick="closeModal('new-folder-modal')">Cancel</button>
            <button class="btn btn-primary" onclick="createNewFolder()">Create Folder</button>
        </div>
    </div>
    {% endcall %}

    <script src="{{ url_for('static', filename='js/app.js') }}?v=3"></script>

    <script>
        function openNewFolderModal() {
            const modal = document.getElementById('new-folder-modal');
            if (modal) {
                modal.classList.add('active');
                setTimeout(() => document.getElementById('new-folder-name').focus(), 100);
            }
        }

        function createNewFolder() {
            const name = document.getElementById('new-folder-name').value;
            if (name) {
                alert(`Folder "${name}" created! (Backend integration pending)`);
                closeModal('new-folder-modal');
            }
        }

        // Export for global use
        window.openNewFolderModal = openNewFolderModal;
    </script>
</body>

</html>