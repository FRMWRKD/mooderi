# Mooderi: AI Prompt Library for Visual Creatives

> **Architecture Note (Updated Dec 2024):**  
> This project uses a **Next.js React frontend** (`/frontend/`) as the primary UI, with a **Flask backend** providing the API. Flask templates in `/app/templates/` are **legacy/OLD** and should not be maintained.

## Current Tech Stack

| Layer | Technology | Location |
|-------|------------|----------|
| **Frontend** | Next.js + React + TailwindCSS | `/frontend/src/` |
| **Backend API** | Flask (57 endpoints) | `/app/routes.py` |
| **Database** | Supabase PostgreSQL | `/supabase/migrations/` |
| **Auth** | Supabase Auth | Frontend + Backend JWT validation |
| **AI Pipeline** | Edge Functions (Visionati + Straico + Google Embeddings) | `/supabase/functions/` |
| **Video Processing** | Modal Cloud | External service |
| **Storage** | Supabase Storage | Managed |

---

## THE CORE VALUE PROPOSITION
This is a searchable library of AI-ready prompts for recreating cinematic looks.
Users browse by IMAGE but the product they take away is the PROMPT.

Example User Flow:
1. User searches "moody neon rain"
2. User sees grid of matching film stills
3. User clicks an image they like
4. User sees: the image + a ready-to-use prompt like:
   "Cinematic still, neon-lit Tokyo alley at night, rain-soaked pavement reflecting pink and blue signs, lone figure with umbrella, anamorphic lens flare, shallow depth of field, Blade Runner aesthetic --ar 16:9"
5. User clicks "Copy Prompt" â†’ pastes into Midjourney/Flux/Runway

---

## PART 1: USER TYPES & ACCESS

### Guest Users (No Login)
- Can browse ALL images in Public Library
- Can view prompts (but see only first 50 characters, blurred)
- Can use "Generate Prompt" on their OWN uploaded image (FREE, unlimited)
  - These user-generated prompts go into "Community Prompts" section
- CANNOT copy full prompts or save to boards

### Registered Users (Free Tier)
- Get **100 FREE credits** on signup
- **Copying a prompt = 1 credit** (this is the monetization)
- Can save images to personal Boards (FREE, no credits)
- Can Star/favorite images (FREE)
- Can upload videos for batch prompt generation (credits per frame)

### Credit Pricing
| Action | Cost |
|--------|------|
| Browse images | FREE |
| Save to board | FREE |
| Star an image | FREE |
| Copy a prompt | 1 credit |
| Generate prompt from uploaded image | 1 credit |
| Video analysis | 1 credit per extracted frame |

**After 100 free credits:** $0.05 per credit

---

## PART 2: CONTENT SECTIONS

### 1. Curated Library (Admin)
- Pre-selected film/commercial/music video stills
- Each image has a hand-crafted or AI-refined prompt
- Organized by categories: Lighting, Mood, Genre, Color Palette

### 2. Community Prompts
- Prompts generated by users via the free "Generate Prompt" feature
- Visible to everyone
- Users who generated them get credit if others copy (future feature)

### 3. My Boards (Logged-in Only)
- Personal saved collections
- User's own uploaded/analyzed images

---

## PART 3: CORE FEATURES

### Feature 1: Prompt Display (THE MAIN FEATURE)
Every image displays:
- **The Prompt** (ready to copy, optimized for Midjourney/Flux)
- **Tags** (searchable keywords)
- **Mood/Vibe** (e.g., "Melancholic", "Euphoric", "Tense")
- **Color Palette** (extracted hex codes, clickable to copy)
- **Technical Notes** (lens type, lighting style, aspect ratio)

**Prompt Format Standard:**
```
[Subject/Scene], [Lighting description], [Color palette], [Camera/lens details], [Mood/atmosphere], [Style reference] --ar [aspect ratio]
```

### Feature 2: Copy Interactions
- **"Copy Prompt" button** â†’ Copies full prompt (costs 1 credit if logged in, blocked if guest)
- **"Copy Colors" button** â†’ Copies hex codes (FREE)
- **"Copy Tags" button** â†’ Copies comma-separated tags (FREE)

### Feature 3: Search & Filter
Users can search/filter by:
- Keywords (free text)
- Mood (dropdown: Melancholic, Energetic, Mysterious, etc.)
- Color (click a color chip to find similar palettes)
- Lighting (Natural, Neon, Golden Hour, Low-Key, etc.)
- Genre (Commercial, Music Video, Film Noir, Sci-Fi, etc.)

### Feature 4: Visual Similarity ("Find Similar")
- Click any image â†’ see visually similar images
- Uses vector embeddings for visual matching
- Great for exploring variations of a vibe

### Feature 5: Boards/Organization
- Create named boards (e.g., "Nike Pitch References")
- Drag images into boards
- Boards can be Private or Public (shared link)

### Feature 6: Video-to-Prompts (Power Feature)
- User pastes YouTube/Vimeo URL
- System extracts key frames (scene detection)
- System generates a prompt for EACH frame
- User confirms: "We found 34 scenes. Generate 34 prompts for 34 credits?"
- Result: A board full of prompts from that video

### Feature 7: Upload Your Own Image
- User uploads any image
- System generates a prompt for it
- Costs 1 credit (or FREE for guests, but prompt goes to Community)

---

## PART 4: UI/UX REQUIREMENTS

### Image Card (Grid View)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â”‚
â”‚      [IMAGE]            â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜… Moody Neon            â”‚
â”‚ #1a1a2e #ff2d55 #00f0ff â”‚
â”‚ [Copy Prompt â†—]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Image Detail View (When Clicked)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [LARGE IMAGE]                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PROMPT:                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Cinematic still, neon-lit alley, rain...   â”‚ â”‚
â”‚ â”‚ [COPY PROMPT]                              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                â”‚
â”‚ MOOD: Melancholic, Isolated                    â”‚
â”‚ LIGHTING: Neon, Low-key, Practical lights      â”‚
â”‚ COLORS: [â– ] [â– ] [â– ] [â– ] [Copy Colors]          â”‚
â”‚ TAGS: rain, neon, urban, night, reflection     â”‚
â”‚                                                â”‚
â”‚ [â˜… Save to Board â–¾] [â™¡ Favorite]               â”‚
â”‚                                                â”‚
â”‚ â”€â”€â”€ SIMILAR IMAGES â”€â”€â”€                         â”‚
â”‚ [img] [img] [img] [img] [img]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Guest User Prompt View (Teaser)
```
PROMPT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cinematic still, neon-lit aâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â”‚
â”‚                                            â”‚
â”‚ [ğŸ”’ Sign up to copy full prompt]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## PART 5: AI PROMPT GENERATION LOGIC

When analyzing an image via Visionati, generate the prompt in this structure:

**System Instruction for Prompt Generation:**
```
Analyze this image and create a detailed text-to-image prompt that would recreate this visual style. 

Structure the prompt as:
1. Main subject/scene description
2. Lighting quality and direction
3. Color palette description (use specific color names)
4. Camera perspective and lens characteristics
5. Atmosphere/mood keywords
6. Style reference (film, director, or aesthetic movement)
7. End with --ar [aspect ratio based on image dimensions]

Keep the prompt under 300 characters. Use comma separation. No complete sentences.
```

**Example Output:**
```
Silhouetted figure in foggy warehouse, shafts of volumetric light through broken windows, desaturated teal and orange, wide angle lens distortion, gritty industrial mood, Roger Deakins cinematography --ar 2.39:1
```

---

## PART 6: VISIONATI API INTEGRATION

**API Key:** `f14b36a8-a7cb-4eb7-9d1d-49b30195511d`

**Endpoint:** `POST https://api.visionati.com/api/fetch`
